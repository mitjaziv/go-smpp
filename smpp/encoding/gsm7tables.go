package encoding

// GSM 7-bit alphabet and extension table
// Source: https://en.wikipedia.org/wiki/GSM_03.38#GSM_7-bit_default_alphabet_and_extension_table_of_3GPP_TS_23.038_/_GSM_03.38

// Lang to define text encoding.
type Lang uint8

// Languages with UDH Identifier Reference
const (
	Basic      Lang = 0x00
	Turkish    Lang = 0x01
	Spanish    Lang = 0x02
	Portuguese Lang = 0x03
	Bengali    Lang = 0x04
	Gujarati   Lang = 0x05
	Hindi      Lang = 0x06
	Kannada    Lang = 0x07
	Malayalam  Lang = 0x08
	Oriya      Lang = 0x09
	Punjabi    Lang = 0x0A
	Tamil      Lang = 0x0B
	Telugu     Lang = 0x0C
	Urdu       Lang = 0x0D
)

// Basic character set and extension set.
var basicForward = map[rune]byte{
	'@': 0x00, '£': 0x01, '$': 0x02, '¥': 0x03, 'è': 0x04, 'é': 0x05, 'ù': 0x06, 'ì': 0x07,
	'ò': 0x08, 'Ç': 0x09, '\n': 0x0a, 'Ø': 0x0b, 'ø': 0x0c, '\r': 0x0d, 'Å': 0x0e, 'å': 0x0f,
	'Δ': 0x10, '_': 0x11, 'Φ': 0x12, 'Γ': 0x13, 'Λ': 0x14, 'Ω': 0x15, 'Π': 0x16, 'Ψ': 0x17,
	'Σ': 0x18, 'Θ': 0x19, 'Ξ': 0x1a /* 0x1B */, 'Æ': 0x1c, 'æ': 0x1d, 'ß': 0x1e, 'É': 0x1f,
	' ': 0x20, '!': 0x21, '"': 0x22, '#': 0x23, '¤': 0x24, '%': 0x25, '&': 0x26, '\'': 0x27,
	'(': 0x28, ')': 0x29, '*': 0x2a, '+': 0x2b, ',': 0x2c, '-': 0x2d, '.': 0x2e, '/': 0x2f,
	'0': 0x30, '1': 0x31, '2': 0x32, '3': 0x33, '4': 0x34, '5': 0x35, '6': 0x36, '7': 0x37,
	'8': 0x38, '9': 0x39, ':': 0x3a, ';': 0x3b, '<': 0x3c, '=': 0x3d, '>': 0x3e, '?': 0x3f,
	'¡': 0x40, 'A': 0x41, 'B': 0x42, 'C': 0x43, 'D': 0x44, 'E': 0x45, 'F': 0x46, 'G': 0x47,
	'H': 0x48, 'I': 0x49, 'J': 0x4a, 'K': 0x4b, 'L': 0x4c, 'M': 0x4d, 'N': 0x4e, 'O': 0x4f,
	'P': 0x50, 'Q': 0x51, 'R': 0x52, 'S': 0x53, 'T': 0x54, 'U': 0x55, 'V': 0x56, 'W': 0x57,
	'X': 0x58, 'Y': 0x59, 'Z': 0x5a, 'Ä': 0x5b, 'Ö': 0x5c, 'Ñ': 0x5d, 'Ü': 0x5e, '§': 0x5f,
	'¿': 0x60, 'a': 0x61, 'b': 0x62, 'c': 0x63, 'd': 0x64, 'e': 0x65, 'f': 0x66, 'g': 0x67,
	'h': 0x68, 'i': 0x69, 'j': 0x6a, 'k': 0x6b, 'l': 0x6c, 'm': 0x6d, 'n': 0x6e, 'o': 0x6f,
	'p': 0x70, 'q': 0x71, 'r': 0x72, 's': 0x73, 't': 0x74, 'u': 0x75, 'v': 0x76, 'w': 0x77,
	'x': 0x78, 'y': 0x79, 'z': 0x7a, 'ä': 0x7b, 'ö': 0x7c, 'ñ': 0x7d, 'ü': 0x7e, 'à': 0x7f,
}

var basicReverse = map[byte]rune{
	0x00: '@', 0x01: '£', 0x02: '$', 0x03: '¥', 0x04: 'è', 0x05: 'é', 0x06: 'ù', 0x07: 'ì',
	0x08: 'ò', 0x09: 'Ç', 0x0a: '\n', 0x0b: 'Ø', 0x0c: 'ø', 0x0d: '\r', 0x0e: 'Å', 0x0f: 'å',
	0x10: 'Δ', 0x11: '_', 0x12: 'Φ', 0x13: 'Γ', 0x14: 'Λ', 0x15: 'Ω', 0x16: 'Π', 0x17: 'Ψ',
	0x18: 'Σ', 0x19: 'Θ', 0x1a: 'Ξ' /* 0x1B */, 0x1c: 'Æ', 0x1d: 'æ', 0x1e: 'ß', 0x1f: 'É',
	0x20: ' ', 0x21: '!', 0x22: '"', 0x23: '#', 0x24: '¤', 0x25: '%', 0x26: '&', 0x27: '\'',
	0x28: '(', 0x29: ')', 0x2a: '*', 0x2b: '+', 0x2c: ',', 0x2d: '-', 0x2e: '.', 0x2f: '/',
	0x30: '0', 0x31: '1', 0x32: '2', 0x33: '3', 0x34: '4', 0x35: '5', 0x36: '6', 0x37: '7',
	0x38: '8', 0x39: '9', 0x3a: ':', 0x3b: ';', 0x3c: '<', 0x3d: '=', 0x3e: '>', 0x3f: '?',
	0x40: '¡', 0x41: 'A', 0x42: 'B', 0x43: 'C', 0x44: 'D', 0x45: 'E', 0x46: 'F', 0x47: 'G',
	0x48: 'H', 0x49: 'I', 0x4a: 'J', 0x4b: 'K', 0x4c: 'L', 0x4d: 'M', 0x4e: 'N', 0x4f: 'O',
	0x50: 'P', 0x51: 'Q', 0x52: 'R', 0x53: 'S', 0x54: 'T', 0x55: 'U', 0x56: 'V', 0x57: 'W',
	0x58: 'X', 0x59: 'Y', 0x5a: 'Z', 0x5b: 'Ä', 0x5c: 'Ö', 0x5d: 'Ñ', 0x5e: 'Ü', 0x5f: '§',
	0x60: '¿', 0x61: 'a', 0x62: 'b', 0x63: 'c', 0x64: 'd', 0x65: 'e', 0x66: 'f', 0x67: 'g',
	0x68: 'h', 0x69: 'i', 0x6a: 'j', 0x6b: 'k', 0x6c: 'l', 0x6d: 'm', 0x6e: 'n', 0x6f: 'o',
	0x70: 'p', 0x71: 'q', 0x72: 'r', 0x73: 's', 0x74: 't', 0x75: 'u', 0x76: 'v', 0x77: 'w',
	0x78: 'x', 0x79: 'y', 0x7a: 'z', 0x7b: 'ä', 0x7c: 'ö', 0x7d: 'ñ', 0x7e: 'ü', 0x7f: 'à',
}

var basicExtensionForward = map[rune]byte{
	'\f': 0x0A, '^': 0x14, '{': 0x28, '}': 0x29, '\\': 0x2F, '[': 0x3C, '~': 0x3D, ']': 0x3E, '|': 0x40, '€': 0x65,
}

var basicExtensionReverse = map[byte]rune{
	0x0A: '\f', 0x14: '^', 0x28: '{', 0x29: '}', 0x2F: '\\', 0x3C: '[', 0x3D: '~', 0x3E: ']', 0x40: '|', 0x65: '€',
}

// Spanish extension set, basic character set is identical.
var spanishExtensionForward = map[rune]byte{
	'ç': 0x09, '\f': 0x0A, '^': 0x14, '{': 0x28, '}': 0x29, '\\': 0x2F, '[': 0x3C, '~': 0x3D, ']': 0x3E, '|': 0x40,
	'Á': 0x41, 'Í': 0x49, 'Ó': 0x4F, 'Ú': 0x55, 'á': 0x61, '€': 0x65, 'í': 0x69, 'ó': 0x6F, 'ú': 0x75,
}

var spanishExtensionReverse = map[byte]rune{
	0x09: 'ç', 0x0A: '\f', 0x14: '^', 0x28: '{', 0x29: '}', 0x2F: '\\', 0x3C: '[', 0x3D: '~', 0x3E: ']', 0x40: '|',
	0x41: 'Á', 0x49: 'Í', 0x4F: 'Ó', 0x55: 'Ú', 0x61: 'á', 0x65: '€', 0x69: 'í', 0x6F: 'ó', 0x75: 'ú',
}

// Portuguese character set and extension set.
var portugueseForward = map[rune]byte{
	'@': 0x00, '£': 0x01, '$': 0x02, '¥': 0x03, 'è': 0x04, 'é': 0x05, 'ù': 0x06, 'ì': 0x07,
	'ò': 0x08, 'ç': 0x09, '\n': 0x0a, 'Ô': 0x0b, 'ô': 0x0c, '\r': 0x0d, 'Á': 0x0e, 'á': 0x0f,
	'Δ': 0x10, '_': 0x11, 'ª': 0x12, 'Ç': 0x13, 'À': 0x14, '∞': 0x15, '^': 0x16, '\\': 0x17,
	'€': 0x18, 'Ó': 0x19, '|': 0x1a /* 0x1B */, 'Â': 0x1c, 'â': 0x1d, 'Ê': 0x1e, 'É': 0x1f,
	' ': 0x20, '!': 0x21, '"': 0x22, '#': 0x23, 'º': 0x24, '%': 0x25, '&': 0x26, '\'': 0x27,
	'(': 0x28, ')': 0x29, '*': 0x2a, '+': 0x2b, ',': 0x2c, '-': 0x2d, '.': 0x2e, '/': 0x2f,
	'0': 0x30, '1': 0x31, '2': 0x32, '3': 0x33, '4': 0x34, '5': 0x35, '6': 0x36, '7': 0x37,
	'8': 0x38, '9': 0x39, ':': 0x3a, ';': 0x3b, '<': 0x3c, '=': 0x3d, '>': 0x3e, '?': 0x3f,
	'Í': 0x40, 'A': 0x41, 'B': 0x42, 'C': 0x43, 'D': 0x44, 'E': 0x45, 'F': 0x46, 'G': 0x47,
	'H': 0x48, 'I': 0x49, 'J': 0x4a, 'K': 0x4b, 'L': 0x4c, 'M': 0x4d, 'N': 0x4e, 'O': 0x4f,
	'P': 0x50, 'Q': 0x51, 'R': 0x52, 'S': 0x53, 'T': 0x54, 'U': 0x55, 'V': 0x56, 'W': 0x57,
	'X': 0x58, 'Y': 0x59, 'Z': 0x5a, 'Ä': 0x5b, 'Ö': 0x5c, 'Ú': 0x5d, 'Ü': 0x5e, '§': 0x5f,
	'~': 0x60, 'a': 0x61, 'b': 0x62, 'c': 0x63, 'd': 0x64, 'e': 0x65, 'f': 0x66, 'g': 0x67,
	'h': 0x68, 'i': 0x69, 'j': 0x6a, 'k': 0x6b, 'l': 0x6c, 'm': 0x6d, 'n': 0x6e, 'o': 0x6f,
	'p': 0x70, 'q': 0x71, 'r': 0x72, 's': 0x73, 't': 0x74, 'u': 0x75, 'v': 0x76, 'w': 0x77,
	'x': 0x78, 'y': 0x79, 'z': 0x7a, 'ã': 0x7b, 'õ': 0x7c, '`': 0x7d, 'ü': 0x7e, 'à': 0x7f,
}

var portugueseReverse = map[byte]rune{
	0x00: '@', 0x01: '£', 0x02: '$', 0x03: '¥', 0x04: 'è', 0x05: 'é', 0x06: 'ù', 0x07: 'ì',
	0x08: 'ò', 0x09: 'ç', 0x0a: '\n', 0x0b: 'Ô', 0x0c: 'ô', 0x0d: '\r', 0x0e: 'Á', 0x0f: 'á',
	0x10: 'Δ', 0x11: '_', 0x12: 'ª', 0x13: 'Ç', 0x14: 'À', 0x15: '∞', 0x16: '^', 0x17: '\\',
	0x18: '€', 0x19: 'Ó', 0x1a: '|' /* 0x1B */, 0x1c: 'Â', 0x1d: 'â', 0x1e: 'Ê', 0x1f: 'É',
	0x20: ' ', 0x21: '!', 0x22: '"', 0x23: '#', 0x24: 'º', 0x25: '%', 0x26: '&', 0x27: '\'',
	0x28: '(', 0x29: ')', 0x2a: '*', 0x2b: '+', 0x2c: ',', 0x2d: '-', 0x2e: '.', 0x2f: '/',
	0x30: '0', 0x31: '1', 0x32: '2', 0x33: '3', 0x34: '4', 0x35: '5', 0x36: '6', 0x37: '7',
	0x38: '8', 0x39: '9', 0x3a: ':', 0x3b: ';', 0x3c: '<', 0x3d: '=', 0x3e: '>', 0x3f: '?',
	0x40: 'Í', 0x41: 'A', 0x42: 'B', 0x43: 'C', 0x44: 'D', 0x45: 'E', 0x46: 'F', 0x47: 'G',
	0x48: 'H', 0x49: 'I', 0x4a: 'J', 0x4b: 'K', 0x4c: 'L', 0x4d: 'M', 0x4e: 'N', 0x4f: 'O',
	0x50: 'P', 0x51: 'Q', 0x52: 'R', 0x53: 'S', 0x54: 'T', 0x55: 'U', 0x56: 'V', 0x57: 'W',
	0x58: 'X', 0x59: 'Y', 0x5a: 'Z', 0x5b: 'Ä', 0x5c: 'Ö', 0x5d: 'Ú', 0x5e: 'Ü', 0x5f: '§',
	0x60: '~', 0x61: 'a', 0x62: 'b', 0x63: 'c', 0x64: 'd', 0x65: 'e', 0x66: 'f', 0x67: 'g',
	0x68: 'h', 0x69: 'i', 0x6a: 'j', 0x6b: 'k', 0x6c: 'l', 0x6d: 'm', 0x6e: 'n', 0x6f: 'o',
	0x70: 'p', 0x71: 'q', 0x72: 'r', 0x73: 's', 0x74: 't', 0x75: 'u', 0x76: 'v', 0x77: 'w',
	0x78: 'x', 0x79: 'y', 0x7a: 'z', 0x7b: 'ã', 0x7c: 'õ', 0x7d: '`', 0x7e: 'ü', 0x7f: 'à',
}

var portugueseExtensionForward = map[rune]byte{
	'ê': 0x05, 'ç': 0x09, '\f': 0x0a, 'Ô': 0x0b, 'ô': 0x0c, 'Á': 0x0e, 'á': 0x0f, 'Φ': 0x12,
	'Γ': 0x13, '^': 0x14, 'Ω': 0x15, 'Π': 0x16, 'Ψ': 0x17, 'Σ': 0x18, 'Θ': 0x19, 'Ê': 0x1f,
	'{': 0x28, '}': 0x29, '\\': 0x2f, '[': 0x3c, '~': 0x3d, ']': 0x3e, '|': 0x40, 'À': 0x41,
	'Í': 0x49, 'Ó': 0x4f, 'Ú': 0x55, 'Ã': 0x5b, 'Õ': 0x5c, 'Â': 0x61, '€': 0x65, 'í': 0x69,
	'ó': 0x6f, 'ú': 0x75, 'ã': 0x7b, 'õ': 0x7c, 'â': 0x7f,
}

var portugueseExtensionReverse = map[byte]rune{
	0x05: 'ê', 0x09: 'ç', 0x0a: '\f', 0x0b: 'Ô', 0x0c: 'ô', 0x0e: 'Á', 0x0f: 'á', 0x12: 'Φ',
	0x13: 'Γ', 0x14: '^', 0x15: 'Ω', 0x16: 'Π', 0x17: 'Ψ', 0x18: 'Σ', 0x19: 'Θ', 0x1f: 'Ê',
	0x28: '{', 0x29: '}', 0x2f: '\\', 0x3c: '[', 0x3d: '~', 0x3e: ']', 0x40: '|', 0x41: 'À',
	0x49: 'Í', 0x4f: 'Ó', 0x55: 'Ú', 0x5b: 'Ã', 0x5c: 'Õ', 0x61: 'Â', 0x65: '€', 0x69: 'í',
	0x6f: 'ó', 0x75: 'ú', 0x7b: 'ã', 0x7c: 'õ', 0x7f: 'â',
}

// getForwardSet function returns forward lookup basic and extended character set for specific language.
func getForwardSet(lang Lang) (map[rune]byte, map[rune]byte) {
	var b, e map[rune]byte
	switch lang {
	case Spanish:
		b = basicForward
		e = spanishExtensionForward
	case Portuguese:
		b = portugueseForward
		e = portugueseExtensionForward
	default:
		b = basicForward
		e = basicExtensionForward
	}
	return b, e
}

// getReverseSet function returns reverse lookup basic and extended character set for specific language.
func getReverseSet(lang Lang) (map[byte]rune, map[byte]rune) {
	var b, e map[byte]rune
	switch lang {
	case Spanish:
		b = basicReverse
		e = spanishExtensionReverse
	case Portuguese:
		b = portugueseReverse
		e = portugueseExtensionReverse
	default:
		b = basicReverse
		e = basicExtensionReverse
	}
	return b, e
}
